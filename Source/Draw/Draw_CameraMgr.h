//==============================================================================
// Filename: Draw_CameraMgr.h
// Description: カメラマネージャ
// Copyright (C) 2022 Silicon Studio Co., Ltd. All rights reserved.
//==============================================================================

#pragma once

//===== インクルード部 =====
#include <Win/Win_App.h>

//===== 前方宣言 =====
class DrawCamera;

//===== クラス定義 =====

//***** カメラマネージャ *****
class DrawCameraMgr
{
public:

    //カメラID
    enum class CameraID
    {
        TEST,

        MAX_CAMERA
    };

    //--------------------------------------------------------------------------

    //--------------------------------------------------------------------------
    /// コンストラクタ
    ///
    /// \param[in] app  App参照
    ///
    /// \return void
    //--------------------------------------------------------------------------
    DrawCameraMgr(
        /*[in]*/ App64& app) noexcept;

    //--------------------------------------------------------------------------
    /// デストラクタ
    ///
    /// \return void
    //--------------------------------------------------------------------------
    ~DrawCameraMgr() noexcept;

    //--------------------------------------------------------------------------
    /// 更新処理
    ///
    /// \return void
    //--------------------------------------------------------------------------
    void Update() noexcept;

    //--------------------------------------------------------------------------
    /// 描画処理
    ///
    /// \return void
    //--------------------------------------------------------------------------
    void Draw() const noexcept;

    //--------------------------------------------------------------------------
    /// カメラセット
    ///
    /// \param[in] id   カメラ番号
    ///
    /// \return void
    //--------------------------------------------------------------------------
    void SetCamera(
        /*[in]*/ CameraID id) noexcept;

    //--------------------------------------------------------------------------
    /// ワールド行列取得
    ///
    /// \return ワールド行列
    //--------------------------------------------------------------------------
    DirectX::XMFLOAT4X4 GetWorldMtx() const noexcept;

    //--------------------------------------------------------------------------
    /// 回転情報取得
    ///
    /// \return 回転情報
    //--------------------------------------------------------------------------
    DirectX::XMFLOAT3 GetRotation() const noexcept;

    //--------------------------------------------------------------------------

private:

    //--------------------------------------------------------------------------
    App64& m_app;
    DirectX::XMFLOAT4X4 m_mtxView;
    DirectX::XMFLOAT4X4 m_mtxProj;
    std::vector<std::unique_ptr<DrawCamera>> m_aCamera;
    CameraID m_currentCamera;
    //--------------------------------------------------------------------------

    /// <summary>
    /// m_app               App参照
    /// m_mtxView           ビュー行列
    /// m_mtxProj           投影行列
    /// m_aCamera           カメラのポインタ配列
    /// m_currentCamera     現在使用中のカメラ
    /// </summary>
};
