//==============================================================================
// Filename: Gfx_Sampler.h
// Description: サンプラー処理
// Copyright (C) 2022 Silicon Studio Co., Ltd. All rights reserved.
//==============================================================================

#pragma once

//===== インクルード部 =====
#include <Gfx/Binder/Gfx_Binder.h>

//===== クラス定義 =====

//***** サンプラー *****
class GfxSampler : public GfxBinder
{
public:

    //--------------------------------------------------------------------------

    //--------------------------------------------------------------------------
    /// コンストラクタ
    ///
    /// \param[in] gfx      グラフィック処理の参照先
    /// \param[in] slot     入力スロット
    ///
    /// \return void
    //--------------------------------------------------------------------------
    GfxSampler(
        /*[in]*/ GfxMain& gfx,
        /*[in]*/ UINT slot = 0u);

    //--------------------------------------------------------------------------
    /// デストラクタ
    ///
    /// \return void
    //--------------------------------------------------------------------------
    ~GfxSampler() noexcept override;

    //--------------------------------------------------------------------------
    /// バインド処理
    ///
    /// \param[in] gfx  グラフィック処理の参照先
    ///
    /// \return void
    //--------------------------------------------------------------------------
    void Bind(
        /*[in]*/ GfxMain& gfx) noexcept override;

    //--------------------------------------------------------------------------
    /// サンプラー取得
    ///
    /// \return サンプラー取得のポインタ
    //--------------------------------------------------------------------------
    D3D12_STATIC_SAMPLER_DESC* GetSampler() noexcept
    {
        return &m_samplerDesc;
    }

    //--------------------------------------------------------------------------

protected:

    //--------------------------------------------------------------------------

    //--------------------------------------------------------------------------
    /// サンプラー作成(DX11)
    ///
    /// \param[in] gfx  グラフィック処理の参照先
    ///
    /// \return void
    //--------------------------------------------------------------------------
    void CreateSamplerDX11(
        /*[in]*/ GfxMain& gfx);

    //--------------------------------------------------------------------------
    /// サンプラー作成(DX12)
    ///
    /// \return void
    //--------------------------------------------------------------------------
    void CreateSamplerDX12() noexcept;

    //--------------------------------------------------------------------------

    //--------------------------------------------------------------------------
    Microsoft::WRL::ComPtr<ID3D11SamplerState> m_pSampler;
    D3D12_STATIC_SAMPLER_DESC m_samplerDesc;
    UINT m_slot;
    //--------------------------------------------------------------------------

    /// <summary>
    /// m_pSampler      サンプラーのポインタ
    /// m_samplerDesc   サンプラーの設定
    /// m_slot          入力スロット
    /// </summary>
};
